# 四季牌阵 - 塔罗牌占卜程序

## 项目简介

这是一个基于Python的塔罗牌四季牌阵占卜程序，包含完整的78张塔罗牌（22张大阿尔卡那 + 56张小阿尔卡那），可以模拟真实的塔罗牌抽牌过程。

### ✨ 主要特性

- 🎴 **完整塔罗系统**：包含全部78张传统塔罗牌
- 🌟 **传统四季牌阵**：基于Marcia Masino经典理论的神圣布局  
- 🤖 **AI智能分析**：集成aihubmix API，提供专业级塔罗解读
- 🌐 **现代Web界面**：基于Streamlit的响应式Web应用，支持移动端
- 🎨 **精美视觉效果**：渐变配色、脉冲动画、直观的牌阵布局
- 🔴 **醒目操作体验**：红色渐变抽牌按钮，一键抽取完整牌阵
- 🎯 **简化操作流程**：无需预输入问题，直接开始占卜
- 📥 **结果导出功能**：支持分析结果导出为文本文件
- ⚙️ **灵活配置**：侧边栏API配置，简单易用
- 📱 **多种模式**：Web应用、命令行版本、桌面GUI全支持
- 🐛 **稳定可靠**：完善的错误处理和兼容性优化

### 🛠 应用组件

1. **Web应用** (`streamlit_app.py`) - 现代化Web界面，红色渐变抽牌按钮，支持AI分析（强烈推荐）
2. **命令行版本** (`四季牌阵.py`) - 传统的文本输出界面
4. **AI分析器** (`ai_analyzer.py`) - 智能塔罗牌解读引擎
5. **配置管理** (`config.py`) - API密钥和参数配置
6. **启动器** (`run_streamlit.py`) - Web应用一键启动器（备用）

## 四季牌阵说明

四季牌阵最初来源于塔罗师 Marcia Masino 的《Best Tarot Practices》，作为占卜季度运势的一种特殊牌阵。这是一个非常神圣的牌阵，**一年仅限于四天（春分、夏至、秋分、冬至）可以用此牌阵占卜**。

### 四季节气的特殊意义

#### 占星学角度
- **春分**：白羊座的第一天 (开创火象)
- **夏至**：巨蟹座的第一天 (开创水象)  
- **秋分**：天秤座的第一天 (开创风象)
- **冬至**：摩羯座的第一天 (开创土象)

这四个星座都属于开创星座，代表着主动、积极、开创性的动态能量，是每个季度能量的起点。这一天能量转换，正式开启那个季度，因此是能量比较强的一天。

#### 阴阳转化角度
- **春分和秋分**：白天和晚上时间相等，阴阳平衡
- **夏至**：白天最长，黑夜最短的一天，阳气极盛
- **冬至**：白天最短，黑夜最长的一天，阴气极盛

这四天是一年中季节转换的关键点，每个人的能量也会随之改变。你可以通过四季牌阵，查看自己的运势以及需要注意的地方，在塔罗的指引下轻松度过这个季度。

### 牌阵布局

```
      4
    (星币)

1     5     3
(权杖) (大牌) (宝剑)

      2
    (圣杯)
```

**位置对应关系**：
- 1号位置：权杖
- 2号位置：圣杯  
- 3号位置：宝剑
- 4号位置：星币（金币）
- 5号位置：大阿尔卡纳

### 五个层面的灵性指引

四季牌阵会从**行动力、情感状态、理性思维、事业财务、心灵成长**五个方面，给予充满洞见的灵性指引：

- **1号位置 (权杖牌组 - 行动力)**: 
  - **元素**：火元素，性质热而干
  - **特点**：活跃、激励与转化
  - **对应**：意志、创造与行动层面
  - **指引**：关于你的行动力、创造力和意志力

- **2号位置 (圣杯牌组 - 情感状态)**: 
  - **元素**：水元素，性质冷而湿
  - **特点**：接受、敏感与流动
  - **对应**：情绪、感觉与感性层面
  - **指引**：关于你的情感世界、直觉和人际关系

- **3号位置 (宝剑牌组 - 理性思维)**:
  - **元素**：风元素，性质热而湿
  - **特点**：传递、漫布与包覆
  - **对应**：理性、思维与关系层面
  - **指引**：关于你的思考方式、沟通和决策能力

- **4号位置 (金币牌组 - 事业财务)**:
  - **元素**：土元素，性质冷而干
  - **特点**：坚实、稳固与持久
  - **对应**：感官、现实与物质层面
  - **指引**：关于你的事业发展、财务状况和物质生活

- **5号位置 (大阿尔卡纳 - 心灵成长)**:
  - **层面**：灵性层面
  - **指引**：关于你的灵魂课题、人生主题和精神成长方向

## 抽牌规则

### 牌组构成

#### 大阿尔卡那 (22张)
包含从"愚人"到"世界"的22张主要奥秘牌，代表人生的重要阶段和灵性成长。

#### 小阿尔卡那 (56张)
分为四个花色，每个花色14张牌：
- **权杖** (14张): 一到十 + 侍从、骑士、皇后、国王
- **圣杯** (14张): 一到十 + 侍从、骑士、皇后、国王  
- **宝剑** (14张): 一到十 + 侍从、骑士、皇后、国王
- **金币** (14张): 一到十 + 侍从、骑士、皇后、国王

### 抽牌过程

1. **时机选择**: 只在四个特殊节气（春分、夏至、秋分、冬至）进行占卜，这是能量转换的关键时刻
2. **分离牌组**: 将78张塔罗牌分成5个独立牌组：
   - 大阿尔卡纳：0-21号牌（22张）
   - 权杖牌组：1-10号牌 + 四张宫廷牌（14张）  
   - 圣杯牌组：1-10号牌 + 四张宫廷牌（14张）
   - 宝剑牌组：1-10号牌 + 四张宫廷牌（14张）
   - 金币牌组：1-10号牌 + 四张宫廷牌（14张）
3. **洗牌**: 分别洗乱每个牌组，让能量自然流动
4. **抽牌**: 按照四季牌阵的对应关系，从相应牌组中各抽取一张牌：
   - 1号位（行动力）← 权杖牌组
   - 2号位（情感状态）← 圣杯牌组  
   - 3号位（理性思维）← 宝剑牌组
   - 4号位（事业财务）← 金币牌组
   - 5号位（心灵成长）← 大阿尔卡纳牌组
5. **正逆位**: 每张牌都有50%的概率出现正位或逆位，反映能量的不同状态
6. **排列**: 按照牌阵布局展示结果，准备进行解读

## 使用方法

### 🚀 快速启动

**推荐方式 - Web应用（最佳体验）**：
```bash
cd (yourfolder)
streamlit run streamlit_app.py
```

**指定端口启动**：
```bash
cd (yourfolder)
streamlit run streamlit_app.py --server.port 8501
```

**备用启动器**：
```bash
cd (yourfolder)
python run_streamlit.py
```

**传统命令行版本**：
```bash
cd (yourfolder)
python 四季牌阵.py
```

**桌面GUI应用（备用）**：
```bash
cd (yourfolder)
python tarot_gui_fixed.py
```

### ⚙️ 环境准备

1. **安装依赖**：
```bash
pip install -r requirements.txt
```

2. **配置API密钥**（可选，用于AI分析）：

**方法1：环境变量**
```bash
export AIHUBMIX_API_KEY="your_api_key_here"
```

**方法2：GUI内配置**
- 启动应用后点击"API配置"按钮
- 输入你的aihubmix API密钥
- 选择使用的AI模型

**方法3：代码配置**
```python
from config import Config
Config.set_api_key("your_api_key_here")
```

### 🤖 AI功能说明

AI分析功能由aihubmix提供支持，包括：

- **📝 详细分析**：全面解读五张牌的含义和相互关系
- **💡 核心洞察**：一句话概括牌阵的核心信息
- **🌟 季节建议**：针对各个生活层面的实用指导


### 输出示例

```
今天是秋分，让我们来抽取四季牌阵...

=== 四季牌阵 ===

            4号位置 (事业财富)
            金币国王 (逆位)

1号位置 (能量和能力)        5号位置 (灵性成长)        3号位置 (思考能力)
权杖皇后 (逆位)        月亮 (逆位)        宝剑六 (逆位)

            2号位置 (情感状况)
            圣杯二 (正位)
```

**解读示例**：
- **5号位置-灵性成长**：月亮(逆位) - 内在的迷茫和恐惧正在消散，真相将逐渐显现
- **1号位置-能量和能力**：权杖皇后(逆位) - 缺乏自信和领导力，需要重新找回内在的火焰
- **2号位置-情感状况**：圣杯二(正位) - 情感和谐，适合建立深度的伙伴关系
- **3号位置-思考能力**：宝剑六(逆位) - 思维陷入循环，难以做出清晰的决定
- **4号位置-事业财富**：金币国王(逆位) - 事业上缺乏实际行动，财务管理需要更加谨慎

## 代码结构

### 主要类和函数

- `MajorArcana`: 大阿尔卡那牌的枚举类
- `MinorArcana`: 小阿尔卡那牌的枚举类  
- `Card`: 卡牌类，包含牌的信息和正逆位状态
- `initialize_tarot_decks()`: 初始化并分类所有塔罗牌
- `draw_card()`: 从指定牌组抽取一张牌
- `shuffle_and_draw()`: 执行完整的洗牌和抽牌流程
- `display_reading()`: 格式化显示抽牌结果

## 占卜解读指南

### 正位与逆位

- **正位**: 牌义的积极面向，能量流畅，事物顺利发展
- **逆位**: 牌义的阴影面向，能量阻滞，需要反思或调整

### 解读建议

1. **整体观察**: 先看核心位置的大阿尔卡那牌，理解主题
2. **四季联系**: 观察四个季节位置的牌是否有关联性
3. **正逆比例**: 注意正逆位牌的比例，判断整体能量状态
4. **具体分析**: 结合每个位置的含义和牌的传统意义进行解读

## 注意事项

### 关于使用时机
- **传统意义上**，四季牌阵应该只在四个特殊节气（春分、夏至、秋分、冬至）使用
- 这四天是一年中能量转换的关键时刻，占卜结果具有特殊的指导意义
- 本程序为了学习和体验目的，可以随时运行，但请记住传统的神圣时机

### 关于占卜态度
- 这是一个学习和娱乐性质的占卜程序，仅供参考
- 塔罗牌解读需要结合个人情况、直觉和生活经验
- 建议将结果作为自我反思和内在智慧的工具，而非绝对的预言
- 程序每次运行都会产生不同的结果，关注其中的象征意义和启发

### 关于解读建议
- 在真正的节气日使用时，可以将结果记录下来，作为这个季度的指引参考
- 建议结合当时的生活状况和内心感受来理解牌义
- 可以在季度结束时回顾，看看牌阵的指引是否与实际经历相符

## 📁 项目文件说明

### 核心组件
- **`streamlit_app.py`** - Streamlit Web应用程序（主应用）
- **`四季牌阵.py`** - 基础塔罗牌系统和命令行版本
- **`ai_analyzer.py`** - AI分析引擎
- **`config.py`** - 配置管理系统

### 工具脚本
- **`run_streamlit.py`** - Web应用启动器（推荐使用）
- **`demo_streamlit.py`** - Streamlit应用演示脚本
- **`demo_ai_analysis.py`** - AI分析功能演示脚本
- **`run_app.py`** - 传统GUI应用启动器（备用）

### 配置文件
- **`requirements.txt`** - Python依赖包列表
- **`README.md`** - 项目文档（当前文件）

## 🔧 技术要求

### 基础环境
- Python 3.7+
- 现代Web浏览器（Chrome、Firefox、Safari、Edge等）

### 依赖包
- `streamlit>=1.28.0` (Web界面框架)
- `requests>=2.31.0` (HTTP请求，用于API调用)
- `pandas>=1.5.0` (数据处理)

### 兼容性说明
- 已优化适配最新版本的Streamlit
- 修复了text_area最小高度限制问题
- 支持Python 3.7-3.11

### 可选配置
- aihubmix API密钥 (用于AI分析功能)
- tkinter (传统桌面GUI支持，通常内置于Python)

## 🚀 快速体验

1. **克隆或下载项目文件到本地**

2. **安装依赖**：
   ```bash
   cd 四季牌阵
   pip install -r requirements.txt
   ```

3. **启动Web应用**：
   ```bash
   streamlit run streamlit_app.py
   ```

4. **开始占卜**：
   - 应用会在浏览器中自动打开
   - 点击醒目的红色"🔮 开始抽取四季牌阵 🔮"按钮
   - 系统将一次性抽取全部5张牌并显示在牌阵中
   - （可选）在侧边栏配置aihubmix API密钥以使用AI分析功能
   - （可选）在展开区域输入特定问题
   - 点击"🤖 AI智能分析"获取专业解读
   - 可导出完整分析结果到本地文件

## 🤖 获取aihubmix API密钥

1. 访问 [aihubmix.com](https://aihubmix.com)
2. 注册并登录账户  
3. 在API管理页面生成密钥
4. 在应用中配置密钥

其实也可以用其他的api

## 📊 更新日志

### v3.1 - 用户体验优化版本
- 🔴 **醒目抽牌按钮**：红色渐变设计，脉冲动画效果，避免用户混淆
- 🎯 **简化操作流程**：移除强制问题输入，支持直接抽牌占卜
- 💫 **优化界面显示**：空牌阵显示"待揭示"状态，避免误点
- 🐛 **兼容性修复**：解决Streamlit版本兼容性问题
- ⚡ **性能改进**：更好的状态管理和错误处理
- 📱 **响应式优化**：更适合移动端操作的按钮布局

### v3.0 - Web应用版本
- 🌐 全新Streamlit Web界面，支持响应式设计
- 🎨 精美的渐变配色和动画效果
- 📥 分析结果导出功能
- 📱 移动端友好设计
- 🔧 简化的侧边栏配置
- ⚡ 更快的加载速度和更好的用户体验

### v2.0 - AI智能版本
- ✨ 新增桌面GUI图形界面
- 🤖 集成AI智能分析功能
- ⚙️ 灵活的API配置管理
- 🎨 现代化用户界面设计
- 🔧 完善的环境检查和错误处理

### v1.0 - 基础版本
- 🎴 完整的78张塔罗牌数据
- 🌟 传统四季牌阵布局
- 🎲 随机正逆位机制  
- 📝 清晰的命令行显示格式

## ⚠️ 免责声明

- 本程序仅供学习、娱乐和个人反思使用
- 塔罗牌解读具有主观性，请结合个人情况理性对待
- AI分析结果仅供参考，不构成人生决策的绝对依据
- 建议将占卜结果作为内在智慧的启发工具



✨ 愿塔罗牌的智慧为你的人生旅程带来启发和指引！ 🔮✨

*在这个特殊的时刻，让四季牌阵为你揭示内心的声音和前进的方向。*
